<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino Game - 3301 Challenge</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f7f7f7;
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }

        #gameContainer {
            background: white;
            border: 2px solid #535353;
            position: relative;
            overflow: hidden;
        }

        #gameCanvas {
            display: block;
            background: white;
        }

        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 16px;
            color: #535353;
            font-weight: bold;
        }

        #instructions {
            margin-top: 10px;
            text-align: center;
            color: #535353;
            font-size: 14px;
        }

        #clueModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #clueContent {
            background: #000;
            color: #00ff00;
            padding: 30px;
            border: 2px solid #00ff00;
            font-family: 'Courier New', monospace;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 0 20px #00ff00;
        }

        #clueContent h2 {
            margin-top: 0;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }

        #closeClue {
            margin-top: 20px;
            padding: 10px 20px;
            background: #00ff00;
            color: #000;
            border: none;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            font-weight: bold;
        }

        #closeClue:hover {
            background: #00cc00;
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="200"></canvas>
        <div id="score">Score: 0</div>
    </div>
    <div id="instructions">
        Press SPACEBAR to jump | Reach 3301 points to unlock the secret
    </div>

    <div id="clueModal">
        <div id="clueContent">
            <h2 class="blink">*** TRANSMISSION RECEIVED ***</h2>
            <p>Congratulations, seeker.</p>
            <p>You have proven your persistence.</p>
            <p><strong>THE CLUE:</strong></p>
            <p style="font-size: 18px; color: #ffff00; text-shadow: 0 0 10px #ffff00;">
                "In the depths of prime numbers,<br>
                where Fibonacci meets Caesar,<br>
                the 13th step reveals the path.<br>
                Look where the cicadas sing."
            </p>
            <p style="font-size: 12px; margin-top: 20px;">
                3301 • 2024 • Remember: Nothing is random
            </p>
            <button id="closeClue">ACKNOWLEDGE</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const clueModal = document.getElementById('clueModal');
        const closeClueBtn = document.getElementById('closeClue');

        // Game variables
        let gameSpeed = 2;
        let gravity = 0.5;
        let score = 0;
        let gameRunning = true;
        let clueShown = false;

        // Dino object
        const dino = {
            x: 50,
            y: 150,
            width: 40,
            height: 40,
            dy: 0,
            jumpPower: -12,
            grounded: true,
            color: '#535353'
        };

        // Obstacles array
        let obstacles = [];
        let frameCount = 0;

        // Ground
        const ground = {
            x: 0,
            y: 190,
            width: canvas.width,
            height: 10,
            color: '#535353'
        };

        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (dino.grounded && gameRunning) {
                    dino.dy = dino.jumpPower;
                    dino.grounded = false;
                }
                if (!gameRunning) {
                    resetGame();
                }
            }
        });

        closeClueBtn.addEventListener('click', () => {
            clueModal.style.display = 'none';
        });

        // Create obstacle
        function createObstacle() {
            obstacles.push({
                x: canvas.width,
                y: 160,
                width: 20,
                height: 30,
                color: '#535353'
            });
        }

        // Update game
        function update() {
            if (!gameRunning) return;

            // Update score
            score++;
            scoreElement.textContent = `Score: ${score}`;

            // Check for 3301 score
            if (score === 3301 && !clueShown) {
                clueShown = true;
                clueModal.style.display = 'flex';
                // Pause the game briefly
                setTimeout(() => {
                    // Game continues after clue is shown
                }, 100);
            }

            // Update dino
            if (!dino.grounded) {
                dino.dy += gravity;
            }
            dino.y += dino.dy;

            // Ground collision
            if (dino.y >= 150) {
                dino.y = 150;
                dino.dy = 0;
                dino.grounded = true;
            }

            // Create obstacles
            frameCount++;
            if (frameCount % 120 === 0) {
                createObstacle();
            }

            // Update obstacles
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].x -= gameSpeed;

                // Remove off-screen obstacles
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                }

                // Collision detection
                if (obstacles[i] && 
                    dino.x < obstacles[i].x + obstacles[i].width &&
                    dino.x + dino.width > obstacles[i].x &&
                    dino.y < obstacles[i].y + obstacles[i].height &&
                    dino.y + dino.height > obstacles[i].y) {
                    
                    gameRunning = false;
                }
            }

            // Increase game speed gradually
            if (frameCount % 1000 === 0) {
                gameSpeed += 0.2;
            }
        }

        // Draw game
        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = ground.color;
            ctx.fillRect(ground.x, ground.y, ground.width, ground.height);

            // Draw ground line pattern
            ctx.strokeStyle = '#535353';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(0, 185);
            ctx.lineTo(canvas.width, 185);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw dino
            ctx.fillStyle = dino.color;
            ctx.fillRect(dino.x, dino.y, dino.width, dino.height);
            
            // Draw dino details (simple)
            ctx.fillStyle = '#333';
            ctx.fillRect(dino.x + 5, dino.y + 5, 5, 5); // Eye
            ctx.fillRect(dino.x + 35, dino.y + 35, 8, 5); // Tail

            // Draw obstacles
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            // Draw game over screen
            if (!gameRunning) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#535353';
                ctx.font = '24px Courier New';
                ctx.textAlign = 'center';
                ctx.fillText('GAME OVER', canvas.width / 2, 80);
                ctx.font = '14px Courier New';
                ctx.fillText(`Final Score: ${score}`, canvas.width / 2, 110);
                ctx.fillText('Press SPACEBAR to restart', canvas.width / 2, 140);
            }
        }

        // Reset game
        function resetGame() {
            gameRunning = true;
            score = 0;
            gameSpeed = 2;
            obstacles = [];
            frameCount = 0;
            dino.y = 150;
            dino.dy = 0;
            dino.grounded = true;
            scoreElement.textContent = 'Score: 0';
        }

        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Start game
        gameLoop();
    </script>
</body>
</html>
